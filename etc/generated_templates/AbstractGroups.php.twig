<?php declare(strict_types=1);

namespace Mammatus\Groups\Generated;

/**
 * This class is generated by mammatus/groups, do not edit manually.
 * Or do, I'm not your parent, they will be overwritten next composer install/update ¯\_(ツ)_/¯.
 */
abstract class AbstractGroups
{
    /**
     * @api
     * @return iterable<string, \Mammatus\Groups\Attributes\Group>
     */
    final public static function groups(): iterable
    {
        {% for name, group in groups -%}
        {% if group.handlers is not empty -%}
        yield '{{ name }}' => new \Mammatus\Groups\Attributes\Group(
            \Mammatus\Groups\Type::{{ group.group.group.type.name }},
            '{{ group.group.group.name }}',
        );
        {% endif -%}
        {% endfor -%}
        yield from [];
    }

    /**
     * @return list<class-string<\Mammatus\Groups\Contracts\LifeCycleHandler>>
     */
    final protected function lifeCycleHandlers(string $group): iterable
    {
        return match ($group) {
        {% for name, group in groups -%}
            {% if group.handlers is not empty -%}
            '{{ name }}' => [
            {% for handler in group.handlers -%}
                \{{ handler.lifeCycleHandler }}::class,
            {% endfor -%}
            ],
            {% endif -%}
        {% endfor -%}
            default => throw new \InvalidArgumentException('No life cycle handlers found for group ' . $group),
        };
    }
}
